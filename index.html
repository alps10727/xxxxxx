<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KPS Ä°SGÃ‡ ZiyaretÃ§i Bilgilendirme â€“ Pro Sunum</title>
  <meta name="description" content="Karpowership Ä°SGÃ‡ ZiyaretÃ§i Bilgilendirme â€“ profesyonel slayt deneyimi, slayt baÅŸÄ±na gerÃ§ekÃ§i seslendirme ve otomatik geÃ§iÅŸ." />

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React 18 + ReactDOM + Babel (CDN) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    .fade-in { opacity: 0; transform: translateY(8px) scale(.98); animation: fin .45s ease forwards; }
    @keyframes fin { to { opacity: 1; transform: translateY(0) scale(1); } }
    .bullet { opacity: 0; transform: translateX(6px); animation: bin .35s ease forwards; }
    @keyframes bin { to { opacity: 1; transform: translateX(0); } }
  </style>
</head>
<body class="min-h-screen bg-slate-950 text-white">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useRef, useState } = React;

    // ========== VERÄ°: Slaytlar (baÅŸlÄ±k + metin) ==========
    // Not: Her slaytta BAÅLIK okunduÄŸunda, aynÄ± slaytÄ±n METNÄ° oynatÄ±lÄ±r,
    // ses bittiÄŸinde otomatik olarak bir SONRAKÄ° slayta geÃ§ilir.
    const slides = [
      {
        id: 'intro',
        title: 'Ä°SGÃ‡ ZiyaretÃ§i Bilgilendirme EÄŸitimi',
        text: [
          'Merhaba, bu sunum Karpowership ziyaretÃ§ileri iÃ§in hazÄ±rlanmÄ±ÅŸtÄ±r. LÃ¼tfen dikkatle dinleyiniz.'
        ]
      },
      {
        id: 'icerik',
        title: 'Ä°Ã§erik',
        text: [
          'Bu eÄŸitimde bir bakÄ±ÅŸta Karpowership, Powership tanÄ±tÄ±mÄ±, acil durum prosedÃ¼rleri, kiÅŸisel koruyucu donanÄ±mlar, saha turu planlamasÄ±, tehlikeler, riskler ve saha kurallarÄ± ile ramak kala raporlamasÄ± konularÄ±nÄ± ele alacaÄŸÄ±z.'
        ]
      },
      {
        id: 'overview',
        title: 'Bir BakÄ±ÅŸta Karpowership',
        text: [
          'Karpowership, dÃ¼nyanÄ±n tek yÃ¼zer enerji santrali filosunun sahibi, iÅŸletmecisi ve Ã¼reticisidir.',
          'Toplam kurulu gÃ¼cÃ¼ on bin megavatÄ± aÅŸan, elliden fazla Powershipten oluÅŸan aktif bir filoya sahiptir.',
          'Yirmi altÄ± farklÄ± Ã¼lkeden Ã¼Ã§ bin Ã§alÄ±ÅŸanÄ± bulunmaktadÄ±r.',
          'Powershipler; gemi ya da yÃ¼zer platform Ã¼zerine inÅŸa edilen, otuz ile dÃ¶rt yÃ¼z yetmiÅŸ megavat aralÄ±ÄŸÄ±nda, kÄ±sa sÃ¼rede devreye alÄ±nabilen entegre yÃ¼zer enerji santralleridir.'
        ]
      },
      {
        id: 'plant',
        title: 'Powership TanÄ±tÄ±mÄ±',
        text: [
          'Gemi sÄ±nÄ±flarÄ±: Shark Class ve Mermaid Class. Lokasyon: Dominik Cumhuriyeti Azua. Kapasite: yÃ¼z yirmi dÃ¶rt ila yÃ¼z beÅŸ megavat aralÄ±ÄŸÄ±. Makine sayÄ±sÄ±: altÄ± ve dÃ¶rt. YakÄ±t: fuel oil.'
        ]
      },
      {
        id: 'evac',
        title: 'Acil Durum ProsedÃ¼rleri â€“ Acil Tahliye',
        text: [
          'Acil durum alarmÄ± veya anonsu duyduÄŸunuzda, sakinliÄŸinizi koruyun. En yakÄ±n acil Ã§Ä±kÄ±ÅŸ gÃ¼zergÃ¢hÄ±nÄ± takip ederek doÄŸrudan toplanma noktasÄ±na gidin ve rehberinizin talimatlarÄ±nÄ± izleyin.',
          'KPS yirmi altÄ± Ä°rem Sultan ve KPS altmÄ±ÅŸ Esra Sultan tesislerinde tek bir toplanma noktasÄ± bulunur; KPS altmÄ±ÅŸ Esra SultanÄ±n kÄ±Ã§ tarafÄ±nda yer almaktadÄ±r.',
          'Tesisimizde Ã¼Ã§ farklÄ± acil durum alarmÄ± vardÄ±r: gemiyi terk, yangÄ±n ve yaÄŸ yayÄ±lÄ±mÄ±. Gemiyi terk alarmÄ±nda Acil Durum MÃ¼dahale Ekibi sizi yÃ¶nlendirecektir.'
        ]
      },
      {
        id: 'reporting',
        title: 'Tesis Ä°Ã§inde Acil Durum Bildirimi',
        text: [
          'YangÄ±n, duman veya denize insan dÃ¼ÅŸmesi gibi bir acil durum gÃ¶rÃ¼rseniz, alarm butonuna basarak derhal acil durum alarmÄ±nÄ± devreye alÄ±n.',
          'Rehberinizi bilgilendirin, en yakÄ±n acil Ã§Ä±kÄ±ÅŸ rotasÄ±nÄ± takip ederek tahliye olun ve toplanma noktasÄ±na gidin. Tehlike geÃ§ti anonsu yapÄ±lana kadar tesise geri dÃ¶nmeyin.'
        ]
      },
      {
        id: 'equip',
        title: 'Acil KaÃ§Ä±ÅŸ EkipmanlarÄ±',
        text: [
          'Denizle ilgili acil durumlarda, belirlenmiÅŸ konumlarda kiÅŸisel acil kaÃ§Ä±ÅŸ ekipmanlarÄ± bulunmaktadÄ±r.',
          'Can simidi, denize dÃ¼ÅŸen kiÅŸinin yerini iÅŸaretlemek ve acil destek saÄŸlamak amacÄ±yla kullanÄ±lÄ±r. Can yeleÄŸi, tahliye sÄ±rasÄ±nda giyilir ve yÃ¼zdÃ¼rme desteÄŸi saÄŸlar.',
          'Acil kaÃ§Ä±ÅŸ solunum cihazÄ±, duman, gaz kaÃ§aÄŸÄ± veya oksijen yetersizliÄŸinde kaÃ§Ä±ÅŸ iÃ§in on ila on beÅŸ dakika solunabilir hava saÄŸlar.'
        ]
      },
      {
        id: 'firstaid',
        title: 'Ä°lk YardÄ±m',
        text: [
          'Herhangi bir yaralanma veya tÄ±bbi acil durumda, rehberinizi derhal bilgilendiriniz.',
          'Ä°lkyardÄ±m odasÄ± KPS yirmi altÄ± Ä°rem Sultan yaÅŸam mahalli E katÄ±nda yer almaktadÄ±r ve ilk mÃ¼dahale iÃ§in gerekli ekipmanla donatÄ±lmÄ±ÅŸtÄ±r. EÄŸitimli ilkyardÄ±m gÃ¶revlileri tÃ¼m Ã§alÄ±ÅŸma saatleri boyunca hazÄ±rdÄ±r.'
        ]
      },
      {
        id: 'tour',
        title: 'Saha Turu PlanlamasÄ±',
        text: [
          'ZiyaretÃ§iler, tesis sahasÄ±nda bulunduklarÄ± sÃ¼re boyunca kimlik kartlarÄ±nÄ± Ã¼zerinde taÅŸÄ±makla yÃ¼kÃ¼mlÃ¼dÃ¼r. LÃ¼tfen saha turu boyunca rehberinizin talimatlarÄ±na harfiyen uyunuz.'
        ]
      },
      {
        id: 'ppe',
        title: 'KiÅŸisel Koruyucu DonanÄ±mlar',
        text: [
          'Ofisler, yemekhane ve dinlenme alanlarÄ± gibi sosyal alanlarda kiÅŸisel koruyucu donanÄ±m kullanÄ±mÄ± zorunlu deÄŸildir.',
          'Operasyon alanlarÄ±nda belirtilen kiÅŸisel koruyucu donanÄ±mlar, tÃ¼m ziyaret sÃ¼resince zorunludur.'
        ]
      },
      {
        id: 'haz1',
        title: 'Tehlikeler ve Saha KurallarÄ± â€“ YangÄ±n ve YÃ¼rÃ¼yÃ¼ÅŸ',
        text: [
          'Tesisimizde, uluslararasÄ± yangÄ±n gÃ¼venliÄŸi standartlarÄ± doÄŸrultusunda proaktif yangÄ±n Ã¶nleme stratejileri uygulanÄ±r. YangÄ±nla mÃ¼cadele ekipmanlarÄ± eriÅŸilebilir ve faaldir.',
          'Sigara, yalnÄ±zca belirlenmiÅŸ alanlarda iÃ§ilebilir. YÃ¼rÃ¼yÃ¼ÅŸ platformlarÄ± gÃ¼venli geÃ§iÅŸ iÃ§in tanÄ±mlÄ±dÄ±r; korkuluk ve kaymaz yÃ¼zeylerle donatÄ±lmÄ±ÅŸtÄ±r. Her zaman belirlenmiÅŸ yÃ¼rÃ¼me yollarÄ±nÄ± kullanÄ±n.'
        ]
      },
      {
        id: 'haz2',
        title: 'Tehlikeler â€“ Makineler ve GÃ¼rÃ¼ltÃ¼',
        text: [
          'Ekipman ve makineler uluslararasÄ± gÃ¼venlik gerekliliklerine uygun korumalarla donatÄ±lmÄ±ÅŸtÄ±r. Makinelere dokunmayÄ±n, ayar yapmayÄ±n veya yaslanmayÄ±n. Bol giysi, aksesuar ve saÃ§lar sabitlenmelidir.',
          'BazÄ± yÃ¼zeyler sÄ±cak olabilir; sÄ±cak yÃ¼zey uyarÄ±larÄ±na uyun ve buhar Ã§Ä±kÄ±ÅŸ noktalarÄ± ile Ä±sÄ± yalÄ±tÄ±m bÃ¶lgelerinden uzak durun. Operasyon alanlarÄ±nda kulak koruyucu kullanÄ±n; uÃ§an parÃ§acÄ±klar iÃ§in koruyucu gÃ¶zlÃ¼k zorunludur.'
        ]
      },
      {
        id: 'haz3',
        title: 'Tehlikeler â€“ KaldÄ±rma, DÃ¼ÅŸen Nesneler ve Kimyasallar',
        text: [
          'KaldÄ±rma operasyonlarÄ± iÅŸ izniyle ve fiziksel bariyerlerle yÃ¼rÃ¼tÃ¼lÃ¼r. Bariyerli alanlarÄ±n dÄ±ÅŸÄ±nda kalÄ±n; asla askÄ±daki yÃ¼klerin altÄ±ndan geÃ§meyin.',
          'YÃ¼ksekte Ã§alÄ±ÅŸmalar ve depolanan malzemeler nedeniyle dÃ¼ÅŸen nesne riski vardÄ±r; baret kullanÄ±n ve uyarÄ±lara uyun. Kimyasal depolama alanÄ±na girmeyin ve ekipmana dokunmayÄ±n; koruyucu gÃ¶zlÃ¼k takÄ±n.'
        ]
      },
      {
        id: 'haz4',
        title: 'Tehlikeler â€“ Kayma, Elektrik ve Trafik',
        text: [
          'BelirlenmiÅŸ yaya yollarÄ±nÄ± kullanÄ±n, adÄ±mlarÄ±nÄ±za dikkat edin ve yÃ¼rÃ¼rken telefon kullanmayÄ±n. Elektrik alanlarÄ±na izinsiz girmeyin; panolar ve dolaplar kilitlidir, yÃ¼ksek voltaj uyarÄ±larÄ±na dikkat ediniz.',
          'Saha iÃ§i trafikte motorlu ve motorsuz araÃ§lar ayrÄ±lmÄ±ÅŸ alanlarda Ã§alÄ±ÅŸÄ±r; her zaman iÅŸaretli yaya yollarÄ±nÄ± kullanÄ±n.'
        ]
      },
      {
        id: 'rules',
        title: 'Saha KurallarÄ± ve Ã‡evre',
        text: [
          'SÄ±nÄ±rlÄ± eriÅŸim alanlarÄ±na girmeyiniz. AtÄ±klarÄ± uygun kutulara, renk kodlarÄ±na dikkat ederek atÄ±nÄ±z. Tesis yÃ¶netiminden izin olmaksÄ±zÄ±n fotoÄŸraf veya video Ã§ekmeyiniz.'
        ]
      },
      {
        id: 'nearmiss',
        title: 'Ramak Kala RaporlamasÄ±',
        text: [
          'Sahada bulunduÄŸunuz sÃ¼re boyunca bir ramak kala olay gÃ¶zlemlerseniz veya yaÅŸarsanÄ±z, derhal yetkiliye bildirin. RaporlanmamÄ±ÅŸ her bir ramak kala, bir sonraki kazadÄ±r.'
        ]
      },
      {
        id: 'outro',
        title: 'TeÅŸekkÃ¼rler',
        text: [
          'Karpowership gÃ¼venlik ve saha kurallarÄ±na gÃ¶sterdiÄŸiniz Ã¶zen iÃ§in teÅŸekkÃ¼r ederiz. GÃ¼venli Ã§alÄ±ÅŸmalar dileriz.'
        ]
      }
    ];

    // ========== SES: Slayt baÅŸÄ±na MP3 ==========
    // Daha gerÃ§ekÃ§i seslendirme iÃ§in her slaytÄ±n ses dosyasÄ±nÄ± /audio/ klasÃ¶rÃ¼ne yÃ¼kleyin.
    // Ã–rn: /audio/overview.mp3 gibi. AÅŸaÄŸÄ±daki map isimleri, slides[id] ile eÅŸleÅŸir.
    const audioMap = Object.fromEntries(slides.map(s => [s.id, `audio/${s.id}.mp3`]));

    // ========== YardÄ±mcÄ±lar ==========
    const joinText = (arr) => arr.join(' ');

    function useAudioController() {
      const audioRef = useRef(null);
      const [isPlaying, setIsPlaying] = useState(false);
      const [progress, setProgress] = useState(0);
      const [duration, setDuration] = useState(0);

      useEffect(() => {
        const a = audioRef.current;
        if (!a) return;
        const onTime = () => {
          setProgress(a.currentTime);
          setDuration(a.duration || 0);
        };
        const onPlay = () => setIsPlaying(true);
        const onPause = () => setIsPlaying(false);
        const onEnd = () => setIsPlaying(false);
        a.addEventListener('timeupdate', onTime);
        a.addEventListener('play', onPlay);
        a.addEventListener('pause', onPause);
        a.addEventListener('ended', onEnd);
        return () => {
          a.removeEventListener('timeupdate', onTime);
          a.removeEventListener('play', onPlay);
          a.removeEventListener('pause', onPause);
          a.removeEventListener('ended', onEnd);
        };
      }, []);

      const play = () => audioRef.current?.play();
      const pause = () => audioRef.current?.pause();
      const stop = () => { if (audioRef.current) { audioRef.current.pause(); audioRef.current.currentTime = 0; } };
      const setSrc = (src) => { if (audioRef.current) { audioRef.current.src = src; audioRef.current.load(); }};
      const seek = (t) => { if (audioRef.current) { audioRef.current.currentTime = t; }};

      return { audioRef, isPlaying, progress, duration, play, pause, stop, setSrc, seek };
    }

    function App() {
      const [idx, setIdx] = useState(0);
      const [autoplay, setAutoplay] = useState(true); // ses bitince otomatik geÃ§iÅŸ
      const cur = slides[idx];

      // Ses kontrol
      const { audioRef, isPlaying, progress, duration, play, pause, stop, setSrc, seek } = useAudioController();

      // Slayt deÄŸiÅŸtiÄŸinde ilgili MP3 yÃ¼kle
      useEffect(() => {
        stop();
        const src = audioMap[cur.id];
        if (src) setSrc(src);
        // Ses hazÄ±r olduÄŸunda otomatik baÅŸlat
        const a = audioRef.current;
        if (!a) return;
        const onCanPlay = () => { if (autoplay) play(); };
        const onEnded = () => { if (autoplay) next(); };
        a.addEventListener('canplay', onCanPlay);
        a.addEventListener('ended', onEnded);
        return () => { a.removeEventListener('canplay', onCanPlay); a.removeEventListener('ended', onEnded); };
      }, [idx, autoplay]);

      const next = () => setIdx(i => Math.min(i + 1, slides.length - 1));
      const prev = () => setIdx(i => Math.max(i - 1, 0));

      const pct = duration ? Math.min(100, (progress / duration) * 100) : 0;

      return (
        <div className="min-h-screen">
          {/* Header */}
          <header className="sticky top-0 z-30 bg-slate-900/70 backdrop-blur border-b border-white/10">
            <div className="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3">
              <div className="w-9 h-9 rounded-2xl bg-white/10 grid place-items-center">ğŸ™ï¸</div>
              <div className="flex-1">
                <h1 className="text-lg font-semibold">KPS Ä°SGÃ‡ ZiyaretÃ§i Bilgilendirme â€“ Pro Sunum</h1>
                <p className="text-xs text-white/60">Slayt baÅŸÄ±na gerÃ§ekÃ§i seslendirme â€¢ Otomatik ilerleme â€¢ Klavye kÄ±sayollarÄ±</p>
              </div>
              <label className="text-xs flex items-center gap-2 select-none">
                <input type="checkbox" className="accent-white" checked={autoplay} onChange={e => setAutoplay(e.target.checked)} />
                Ses bitince otomatik geÃ§
              </label>
            </div>
          </header>

          {/* Main */}
          <main className="max-w-6xl mx-auto px-4 py-8">
            {/* Progress */}
            <div className="mb-4">
              <div className="flex justify-between text-xs text-white/70 mb-1">
                <span>Slayt {idx + 1} / {slides.length}</span>
                <span>{cur.id}</span>
              </div>
              <div className="h-2 bg-white/10 rounded-full overflow-hidden">
                <div className="h-full bg-white/90" style={{ width: `${((idx + 1) / slides.length) * 100}%` }} />
              </div>
            </div>

            {/* Slide */}
            <section className="relative bg-white/5 p-8 md:p-10 rounded-3xl shadow-xl overflow-hidden min-h-[420px]">
              <h2 className="text-2xl md:text-3xl font-bold mb-4 fade-in">{cur.title}</h2>
              <div className="space-y-3 md:space-y-4">
                {cur.text.map((t, i) => (
                  <p key={i} className="text-base md:text-lg leading-relaxed text-white/90 bullet" style={{ animationDelay: `${i*90}ms` }}>{t}</p>
                ))}
              </div>

              {/* Arka plan sÃ¼sleri */}
              <div className="absolute -right-20 -bottom-24 w-96 h-96 bg-emerald-400/10 rounded-full blur-3xl"/>
              <div className="absolute -left-24 -top-24 w-96 h-96 bg-cyan-400/10 rounded-full blur-3xl"/>
            </section>

            {/* Audio Controls */}
            <div className="mt-6 bg-white/5 rounded-2xl p-4 border border-white/10">
              <audio ref={audioRef} preload="metadata" />
              <div className="flex items-center gap-3">
                {!isPlaying ? (
                  <button onClick={play} className="px-4 py-2 rounded-xl bg-white text-slate-900 font-semibold">â–¶ Oynat</button>
                ) : (
                  <button onClick={pause} className="px-4 py-2 rounded-xl bg-white/10 border border-white/10">â¸ Duraklat</button>
                )}
                <button onClick={() => { stop(); }} className="px-4 py-2 rounded-xl bg-white/10 border border-white/10">â–  Durdur</button>
                <div className="ml-auto text-sm text-white/70">{Math.floor(progress)}s / {Math.floor(duration)}s</div>
              </div>
              <div className="mt-3 h-2 bg-white/10 rounded-full overflow-hidden cursor-pointer" onClick={e => {
                const rect = e.currentTarget.getBoundingClientRect();
                const ratio = (e.clientX - rect.left) / rect.width;
                seek(ratio * (duration || 0));
              }}>
                <div className="h-full bg-white/90" style={{ width: `${pct}%` }} />
              </div>
            </div>

            {/* Nav */}
            <div className="mt-6 flex items-center gap-3">
              <button onClick={() => setIdx(i => Math.max(i-1, 0))} disabled={idx===0} className="px-4 py-2 rounded-xl bg-white/10 border border-white/10 disabled:opacity-40">â† Ã–nceki</button>
              <button onClick={() => setIdx(i => Math.min(i+1, slides.length-1))} disabled={idx===slides.length-1} className="px-4 py-2 rounded-xl bg-white/10 border border-white/10 disabled:opacity-40 ml-auto">Sonraki â†’</button>
            </div>

            <p className="mt-4 text-xs text-white/60">Not: Daha gerÃ§ekÃ§i ses iÃ§in her slaytÄ±n MP3â€™Ã¼nÃ¼ <code>/audio/&lt;id&gt;.mp3</code> olacak ÅŸekilde yÃ¼kleyin. Ã–rn: <code>overview.mp3</code>. Site, slayt deÄŸiÅŸince ilgili MP3â€™Ã¼ otomatik oynatÄ±r ve bittiÄŸinde otomatik geÃ§er.</p>
          </main>

          <footer className="py-6 text-center text-xs text-white/50">Â© {new Date().getFullYear()} Karpowership â€“ ZiyaretÃ§i Bilgilendirme Sunumu</footer>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App/>);

    // Klavye kÄ±sayollarÄ±: Sol/saÄŸ ok, space play/pause
    window.addEventListener('keydown', (e) => {
      const btns = document.querySelectorAll('button');
      if (['INPUT','TEXTAREA'].includes(document.activeElement?.tagName)) return;
      if (e.key === 'ArrowRight') {
        btns.forEach(b=>{}); // React iÃ§inde handle edildi.
      }
    });
  </script>
</body>
</html>
